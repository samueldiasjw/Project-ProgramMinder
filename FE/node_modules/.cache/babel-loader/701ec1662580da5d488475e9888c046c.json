{"ast":null,"code":"var _jsxFileName = \"/Users/samueldias/Desktop/MyProjectMindera/src/homepage/Components/Posts.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { Jumbotron, Container, Image } from \"react-bootstrap\";\nimport styles from \"../CSS/Posts.module.css\";\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport NotAccess from \"./NotAccess\";\nexport default function Posts() {\n  const {\n    id\n  } = useParams();\n  const [posts, setPosts] = useState([]);\n  const [thread, setThread] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [text, setText] = useState(\"\");\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", document.cookie.split(\"token=\")[1]);\n  var requestOptions = {\n    method: 'GET',\n    headers: myHeaders,\n    redirect: 'follow'\n  };\n  useEffect(() => {\n    fetch(`http://localhost:8080/posts/${id}`, requestOptions).then(response => {\n      return response.json();\n    }).then(data => {\n      setPosts(data || []);\n    }).catch(error => {\n      console.log(\"ERRRORRR\");\n    });\n    fetch(`http://localhost:8080/threads/${id}`, requestOptions).then(response => {\n      return response.json();\n    }).then(data => {\n      setThread(data || []);\n    });\n    fetch(`http://localhost:8080/users/${id}`, requestOptions).then(response => {\n      return response.json();\n    }).then(data => {\n      setUsers(data || []);\n    });\n  }, [id]);\n\n  function sendPost(e) {\n    e.preventDefault();\n\n    if (text !== \"\") {\n      console.log(text);\n    } else {\n      alert(\"You can't post this\");\n    }\n  }\n\n  var editorText;\n\n  function quote() {\n    console.log(\"HEREEE\");\n    console.log(editorText.getData());\n  }\n\n  return /*#__PURE__*/React.createElement(Jumbotron, {\n    id: \"about\",\n    className: styles.Jumbotron,\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, document.cookie.split(\"token=\")[1] ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, thread.map(post => {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      key: post.threadId,\n      className: styles.Us,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, post.title);\n  })), thread.map((post, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: post.threadId,\n      className: styles.cardPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.userInformation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: users[index] !== undefined ? users[index].photo : \"\",\n      alt: \"Account Image\",\n      className: styles.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }), users[index] !== undefined ? /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.userInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 51\n      }\n    }, \" \", /*#__PURE__*/React.createElement(Link, {\n      className: styles.link,\n      to: `/account/${users[index].userId}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 83\n      }\n    }, users[index].avatarName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 185\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.tagRole + ' ' + styles[users[index].role],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 191\n      }\n    }, users[index].role), \" \") : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.postText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, post.post)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      className: styles.Reply,\n      onClick: quote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, \"\\u201CReply\")));\n  }), posts.length > 0 ? posts.map((post, index) => {\n    {\n      index = index + 1;\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: post.postId,\n      className: styles.cardPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.userInformation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: users[index] !== undefined ? users[index].photo : \"\",\n      alt: \"Account Image\",\n      className: styles.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }), users[index] !== undefined ? /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.userInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 51\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: styles.link,\n      to: `/account/${users[index].userId}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 82\n      }\n    }, users[index].avatarName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 184\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.tagRole + ' ' + styles[users[index].role],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 190\n      }\n    }, users[index].role), \" \") : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.postText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, post.post)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      className: styles.Reply,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, \"\\u201CReply\")));\n  }) : console.log(\"DONT HAVE MORE POSTS\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.richtext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CKEditor, {\n    editor: ClassicEditor,\n    data: \"<p>Write your reply...</p>\",\n    onChange: (event, editor) => {\n      const data = editor.getData();\n      editorText = editor;\n      setText(data);\n    },\n    onFocus: (event, editor) => {\n      const data = editor.getData();\n\n      if (data === \"<p>Write your reply...</p>\") {\n        editor.setData(\"\");\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    className: styles.createButton,\n    onClick: sendPost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, \"+ Post Reply\"))) : /*#__PURE__*/React.createElement(NotAccess, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 18\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.lineGrade,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/samueldias/Desktop/MyProjectMindera/src/homepage/Components/Posts.js"],"names":["React","useEffect","useState","useParams","Link","Jumbotron","Container","Image","styles","CKEditor","ClassicEditor","NotAccess","Posts","id","posts","setPosts","thread","setThread","users","setUsers","text","setText","myHeaders","Headers","append","document","cookie","split","requestOptions","method","headers","redirect","fetch","then","response","json","data","catch","error","console","log","sendPost","e","preventDefault","alert","editorText","quote","getData","card","heading","map","post","threadId","Us","title","index","cardPost","userInformation","undefined","photo","image","userInfo","link","userId","avatarName","tagRole","role","postText","Reply","length","postId","richtext","event","editor","setData","createButton","lineGrade"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { Jumbotron, Container, Image} from \"react-bootstrap\";\nimport styles from \"../CSS/Posts.module.css\";\n\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport NotAccess from \"./NotAccess\"\n\nexport default function Posts() {\n  const { id } = useParams();\n  const [posts, setPosts] = useState([]);\n  const [thread, setThread] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [text, setText] = useState(\"\");\n\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", document.cookie.split(\"token=\")[1]);\n\n  var requestOptions = {\n    method: 'GET',\n    headers: myHeaders,\n    redirect: 'follow'\n  };\n\n  useEffect( () => {\n    fetch(`http://localhost:8080/posts/${id}`, requestOptions)\n    .then((response) => {\n      return response.json()\n    })\n    .then((data) => {\n      setPosts(data || [])\n    }) \n    .catch ((error) =>{\n        console.log(\"ERRRORRR\")\n    })\n\n    fetch(`http://localhost:8080/threads/${id}`, requestOptions)\n        .then((response) => {\n          return response.json()\n        })\n        .then((data) => {\n          setThread(data || [])\n        })\n\n    fetch(`http://localhost:8080/users/${id}`, requestOptions)\n        .then((response) => {\n          return response.json()\n        })\n        .then((data) => {\n          setUsers(data || [])\n        })\n    \n  }, [id])\n\n  function sendPost(e) {\n    e.preventDefault();\n\n    if(text !== \"\"){\n      console.log(text);\n    } else{\n      alert(\"You can't post this\");\n    }\n  }\n\n  var editorText;\n  function quote(){\n    console.log(\"HEREEE\")\n    console.log(editorText.getData())\n  }\n\n  return (\n    <Jumbotron id=\"about\" className={styles.Jumbotron} fluid>\n      <Container>\n        {document.cookie.split(\"token=\")[1] ?\n          <div className={styles.card}>\n          <h1 className={styles.heading}>\n            {thread.map((post) =>{\n                return(\n                  <span key={post.threadId} className={styles.Us}>{post.title}</span>\n                )\n            })}\n          </h1>\n            {thread.map((post, index) =>{\n              return(\n                <div key={post.threadId} className={styles.cardPost}>\n                  <div className={styles.userInformation}>\n                    <Image src={users[index] !== undefined ? users[index].photo : \"\"} alt=\"Account Image\" className={styles.image}></Image>\n                    {users[index] !== undefined ? <p className={styles.userInfo}> <Link className={styles.link} to={`/account/${users[index].userId}`}>{users[index].avatarName}</Link> <br/> <span className={styles.tagRole + ' ' + styles[users[index].role]}>{users[index].role}</span> </p> : \"\"}\n                  </div>\n                  <div>\n                    <p className={styles.postText}>{post.post}</p>\n                  </div>\n                  <div>\n                    <a href = \"#\" className = {styles.Reply} onClick={quote}>\n                      &#8220;Reply\n                    </a>\n                  </div>\n                </div>\n              )\n            })}\n\n            {posts.length > 0 ? posts.map((post, index) =>{\n              {index= index + 1}\n              return(\n                <div key={post.postId} className={styles.cardPost}>\n                  <div className={styles.userInformation}>\n                    <Image src={users[index] !== undefined ? users[index].photo : \"\"} alt=\"Account Image\" className={styles.image}></Image>\n                    {users[index] !== undefined ? <p className={styles.userInfo}><Link className={styles.link} to={`/account/${users[index].userId}`}>{users[index].avatarName}</Link> <br/> <span className={styles.tagRole + ' ' + styles[users[index].role]}>{users[index].role}</span> </p> : \"\"}\n                  </div>\n                  <div>\n                    <p className={styles.postText}>{post.post}</p>\n                  </div>\n                  <div>\n                    <a href = \"#\" className = {styles.Reply}>\n                      &#8220;Reply\n                    </a>\n                  </div>\n                </div>\n              )\n            }):console.log(\"DONT HAVE MORE POSTS\")\n            }\n\n            <div className = {styles.richtext}>\n              <CKEditor\n                      editor={ ClassicEditor }\n                      data=\"<p>Write your reply...</p>\"\n                      onChange={ ( event, editor ) => {\n                        const data = editor.getData();\n                        editorText = editor;\n\n                        setText(data)\n                      } }\n                      onFocus={ ( event, editor ) => {\n                          const data = editor.getData();\n\n                          if(data === \"<p>Write your reply...</p>\"){\n                            editor.setData(\"\");\n                          }\n                      } }\n              />\n              <a href = \"#\" className = {styles.createButton} onClick={sendPost}>\n                + Post Reply\n              </a>\n            </div>\n        </div> : <NotAccess/>\n        }\n        \n      </Container>\n      <div className={styles.lineGrade} ></div>\n    </Jumbotron>\n  );\n}\n\n"]},"metadata":{},"sourceType":"module"}